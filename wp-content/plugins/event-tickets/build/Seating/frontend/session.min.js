!function(t){function e(e){for(var r,c,s=e[0],a=e[1],u=e[2],d=0,f=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&f.push(i[c][0]),i[c]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r]);for(l&&l(e);f.length;)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,s=1;s<n.length;s++){var a=n[s];0!==i[a]&&(r=!1)}r&&(o.splice(e--,1),t=c(c.s=n[0]))}return t}var r={},i={10:0},o=[];function c(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=r,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return t[e]}.bind(null,r));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="";var s=window.webpackJsonp=window.webpackJsonp||[],a=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=a;o.push(["A9IG",0]),n()}({A9IG:function(t,e,n){"use strict";n.r(e),n.d(e,"checkoutControlsSelectors",(function(){return C})),n.d(e,"setIsInterruptable",(function(){return L})),n.d(e,"isInterruptable",(function(){return E})),n.d(e,"isExpired",(function(){return A})),n.d(e,"isStarted",(function(){return M})),n.d(e,"findTimerData",(function(){return R})),n.d(e,"beaconInterrupt",(function(){return Y})),n.d(e,"syncWithBackend",(function(){return z})),n.d(e,"start",(function(){return $})),n.d(e,"reset",(function(){return et})),n.d(e,"pause",(function(){return nt})),n.d(e,"pauseToCheckout",(function(){return rt})),n.d(e,"resume",(function(){return ot})),n.d(e,"setTargetDom",(function(){return st})),n.d(e,"syncOnLoad",(function(){return at})),n.d(e,"watchCheckoutControls",(function(){return lt})),n.d(e,"getWatchedCheckoutControls",(function(){return dt})),n.d(e,"setHealthcheckLoopId",(function(){return ft})),n.d(e,"getHealthcheckTimeoutId",(function(){return pt})),n.d(e,"getCountdownTimeoutId",(function(){return mt})),n.d(e,"getResumeTimeoutId",(function(){return ht}));var r=n("lSNA"),i=n.n(r),o=n("yXPU"),c=n.n(o);const s=tec.tickets.seating.frontend.session;n("lo4d");var a=n("g56x"),u=n("MsaN");function l(t){return Object(u.createHtmlComponentFromTemplateString)('<script\n\t\tid="tec-tickets-seating-interrupt-dialog-template"\n\t\ttype="text/template"\n\t\tdata-js="{dataJs}"\n\t>\n\t\t<div class="tribe-tickets-seating__interrupt-dialog" role="dialog">\n\t\t\t<div class="tribe-tickets-seating__interrupt-header">\n\t\t\t\t<div class="dashicons dashicons-clock"></div>\n\t\t\t\t<div class="tribe-tickets-seating__interrupt-title">{title}</div>\n\t\t\t</div>\n\t\t\t<div class="tribe-dialog__content tribe-modal__content tribe-tickets-seating__interrupt-content">{content}</div>\n\t\t\t<div class="tribe-tickets-seating__interrupt-footer">\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\tonclick="window.location.href=\'{redirectUrl}\'"\n\t\t\t\t\tclass="tribe-common-c-btn tribe-common-c-btn--small"\n\t\t\t\t>\n\t\t\t\t\t{buttonLabel}\n\t\t\t\t</button>\n\t\t</div>\n\t<\/script>',t)}var d=n("l3Sj");function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const{ajaxUrl:m,ajaxNonce:h,checkoutGraceTime:b,ACTION_START:y,ACTION_SYNC:g,ACTION_INTERRUPT_GET_DATA:k,ACTION_PAUSE_TO_CHECKOUT:_}=s;let w=null,v=null,O=null,T=!1,j=!0,P=!1,S=null,x=document,I=[];const C=[".tribe-tickets__commerce-checkout-form-submit-button",".tribe-tickets__commerce-checkout-paypal-buttons button"];function L(t){j=t}function E(){return j}function U(t){P=t}function A(){return P}function N(t){T=t}function M(){return T}function D(){return x.querySelectorAll(".tec-tickets-seating__timer")}function R(){const t=D();if(0===t.length)return null;let e=null,n=null,r=null;return Array.from(t).find(t=>!!(t.dataset.token&&t.dataset.postId&&t.dataset.redirectUrl)&&(e=t.dataset.token,n=t.dataset.postId,r=t.dataset.redirectUrl,!0)),e&&n&&r?{token:e,postId:n,redirectUrl:r}:null}function F(t,e,n){t.classList.remove("tec-tickets-seating__timer--hidden");const r=t.querySelector(".tec-tickets-seating__time-minutes"),i=t.querySelector(".tec-tickets-seating__time-seconds");r&&i&&(r.innerText=e,i.innerText=String(n).padStart(2,"0"))}function q(){return G.apply(this,arguments)}function G(){return(G=c()((function*(){const{postId:t,token:e}=R(),n=new URL(m);n.searchParams.set("_ajaxNonce",h),n.searchParams.set("action",k),n.searchParams.set("postId",t),n.searchParams.set("token",e);const r=yield fetch(n.toString(),{method:"GET"}),i={title:Object(d._x)("Time limit expired","Seat selection expired timer title","event-tickets"),content:Object(d._x)("Your seat selections are no longer reserved, but tickets are still available.","Seat selection expired timer content","event-tickets"),buttonLabel:Object(d._x)("Find Seats","Seat selection expired timer button label","event-tickets"),redirectUrl:window.location.href};if(!r.ok)return console.error("Failed to fetch interrupt modal data"),i;const o=yield r.json();return o.success&&o.data?{title:o.data.title||i.title,content:o.data.content||i.content,buttonLabel:o.data.buttonLabel||i.buttonLabel,redirectUrl:o.data.redirectUrl||i.redirectUrl}:(console.error("Failed to fetch interrupt modal data"),i)}))).apply(this,arguments)}function H(){return J.apply(this,arguments)}function J(){return(J=c()((function*(){var t;const e=null===(t=D())||void 0===t?void 0:t[0];if(!e)return console.warn("No timer element found"),null;const{title:n,content:r,buttonLabel:i,redirectUrl:o}=yield q();e.dataset.content="dialog-content-tec-tickets-seating-timer-interrupt";let c=".tec-tickets-seating__timer";var s;(e.closest(".tribe-dialog")&&(c=".tribe-tickets__tickets-form, .tec-tickets-seating__tickets-block"),S)||(S=l({dataJs:"dialog-content-tec-tickets-seating-timer-interrupt",title:n,content:r,buttonLabel:i,redirectUrl:o}),null===(s=x.querySelector(c))||void 0===s||s.appendChild(S));return new A11yDialog({trigger:".tec-tickets-seating__timer",appendTarget:c,wrapperClasses:"tribe-dialog",overlayClasses:"tribe-dialog__overlay tribe-modal__overlay",contentClasses:"tribe-dialog__wrapper tribe-tickets-seating__interrupt-wrapper",overlayClickCloses:!1})}))).apply(this,arguments)}function B(){return W.apply(this,arguments)}function W(){return(W=c()((function*(){if(!E())return!0;L(!0),D().forEach(t=>{F(t,0,0)}),U(!0),clearTimeout(w),w=null,clearTimeout(v),v=null;const t=yield H();Object(a.doAction)("tec.tickets.seating.timer_interrupt"),t&&(t.show(),t.shown=!1),L(!1)}))).apply(this,arguments)}function Y(){if(!E())return;const{postId:t,token:e}=R(),n=new URL(m);n.searchParams.set("_ajaxNonce",h),n.searchParams.set("action",k),n.searchParams.set("postId",t),n.searchParams.set("token",e),window.navigator.sendBeacon(n.toString())}function K(t){t<=0?B():(N(!0),w=setTimeout(()=>{t-=1,D().forEach(e=>{F(e,Math.floor(t/60),t%60)}),A()||K(t)},1e3))}function X(){A()||(v=setTimeout(c()((function*(){yield z(),X()})),3e3))}function z(){return Q.apply(this,arguments)}function Q(){return(Q=c()((function*(){if(A()||0===D().length)return;const t=yield V(g);t<=0?B():(w&&(clearTimeout(w),w=null),K(t),v||X())}))).apply(this,arguments)}function V(t){return Z.apply(this,arguments)}function Z(){return(Z=c()((function*(t){const e=R();if(null===e)return!1;if(-1===[y,g,_].indexOf(t))return!1;const n=new URL(m);n.searchParams.set("_ajaxNonce",h),n.searchParams.set("action",t),n.searchParams.set("token",e.token),n.searchParams.set("postId",e.postId);const r=yield fetch(n.toString(),{method:"POST"});if(!r.ok)return!1;const i=yield r.json();if(!(i.success&&i.data.secondsLeft&&i.data.timestamp))return console.error("Failed to communicate with the backend"),!1;const o=i.data;return o.secondsLeft-Math.max(0,Math.floor(o.timestamp-Date.now()/1e3))}))).apply(this,arguments)}function $(){return tt.apply(this,arguments)}function tt(){return(tt=c()((function*(){if(N()||0===D().length)return;const t=yield V(y),{postId:e,token:n}=R();if(!(t&&e&&n))return void B();const r=Math.floor(t/60),i=t%60;D().forEach(t=>{F(t,r,i)}),N(!0),K(t),X()}))).apply(this,arguments)}function et(){w&&clearTimeout(w),v&&clearTimeout(v),O&&clearTimeout(O),T=!1,P=!1,v=null,w=null,O=null,j=!0,I.forEach(t=>{t.removeEventListener("click",rt),t.removeEventListener("submit",rt)}),I=[]}function nt(t){t=t||0,L(!1),v&&(clearTimeout(v),v=null),w&&(clearTimeout(w),w=null),t&&(O=setTimeout(ot,1e3*t))}function rt(){return it.apply(this,arguments)}function it(){return(it=c()((function*(){(yield V(_))<=0?B():nt(b)}))).apply(this,arguments)}function ot(){return ct.apply(this,arguments)}function ct(){return(ct=c()((function*(){O&&(clearTimeout(O),O=null),L(!0),yield z()}))).apply(this,arguments)}function st(t){x=t||document}function at(){return ut.apply(this,arguments)}function ut(){return(ut=c()((function*(){0!==Array.from(D()).filter(t=>"syncOnLoad"in t.dataset).length&&(L(!0),window.addEventListener("beforeunload",Y),yield z())}))).apply(this,arguments)}function lt(){const t=Object(a.applyFilters)("tec.tickets.seating.frontend.session.checkoutControls",C);x.querySelectorAll(t.join(", ")).forEach(t=>{I.push(t),t.addEventListener("click",rt),t.addEventListener("submit",rt)})}function dt(){return I}function ft(t){return v=t,v}function pt(){return v}function mt(){return w}function ht(){return O}Object(u.onReady)(()=>at()),Object(u.onReady)(()=>lt()),window.tec=window.tec||{},window.tec.tickets=window.tec.tickets||{},window.tec.tickets.seating=window.tec.tickets.seating||{},window.tec.tickets.seating.frontend=window.tec.tickets.seating.frontend||{},window.tec.tickets.seating.frontend.session=p(p({},window.tec.tickets.seating.frontend.session||{}),{},{start:$,reset:et,syncOnLoad:at,interrupt:B,setIsInterruptable:L})},MsaN:function(t,e){t.exports=tec.tickets.seating.utils},g56x:function(t,e){t.exports=wp.hooks},l3Sj:function(t,e){t.exports=wp.i18n},lo4d:function(t,e,n){}});